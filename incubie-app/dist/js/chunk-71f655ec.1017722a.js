(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-71f655ec"],{"03e6":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("i-container",{staticClass:"i-account",attrs:{small:""}},[a("v-card",{staticClass:"mb-5"},[a("v-form",{on:{submit:function(e){return e.preventDefault(),t.updateProfile(e)}}},[a("v-card-text",[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("div",{staticClass:"i-account__avatar"},[a("i-user-icon",{attrs:{user:t.mutableUser,size:155}}),a("v-btn",{staticClass:"i-account__avatar-edit",attrs:{color:"accent",small:"",fab:""},on:{click:function(e){return e.preventDefault(),t.chooseAvatar(e)}}},[a("v-icon",[t._v("edit")])],1),a("input",{ref:"avatarFileInput",staticClass:"i-account__avatar-input",attrs:{type:"file"},on:{change:t.handleAvatarFile}})],1)]),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Name",color:"accent"},model:{value:t.fullName,callback:function(e){t.fullName=e},expression:"fullName"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Email",color:"accent"},model:{value:t.mutableUser.email,callback:function(e){t.$set(t.mutableUser,"email",e)},expression:"mutableUser.email"}})],1)],1)],1),a("v-card-actions",{staticClass:"justify-end"},[a("v-btn",{attrs:{loading:t.isUpdatePending,type:"submit",color:"accent",flat:""}},[t._v("\n            Update\n          ")])],1)],1)],1)],1)],1)},n=[],s=(a("28a5"),a("96cf"),a("3040")),i=a("c93e"),c=a("2f62"),l=a("2ef0"),u={name:"AccountProfile",components:{},props:{},data:function(){return{tmpAvatar:null,mutableUser:null,isUpdatePending:!1}},computed:Object(i["a"])({},Object(c["c"])("auth",["loggedInUser"]),Object(c["c"])("companies",{company:"current"}),{avatar:function(){return this.tmpAvatar||this.loggedInUser.avatar}}),watch:{loggedInUser:{immediate:!0,handler:function(t){this.mutableUser={firstName:t.firstName,lastName:t.lastName,email:t.email,avatar:t.avatar},this.fullName="".concat(this.loggedInUser.firstName," ").concat(this.loggedInUser.lastName)}}},created:function(){},methods:Object(i["a"])({},Object(c["b"])("users",{patchUser:"patch"}),Object(c["d"])("snackbar",{showSnackbar:"show"}),{chooseAvatar:function(){this.$refs.avatarFileInput.click()},handleAvatarFile:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(e){var a,r,n=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:a=Object(l["get"])(e,"currentTarget.files[0]"),a&&(r=new FileReader,r.readAsDataURL(a),r.onload=function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(e){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:a=e.target.result,n.mutableUser.avatar=a;case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),updateProfile:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.isUpdatePending=!0,this.mutableUser.avatar===this.loggedInUser.avatar){t.next=6;break}return t.next=4,this.$dispatchAction({type:this.$actionTypes.UPLOAD_IMAGES,payload:{uri:this.mutableUser.avatar,bucket:"".concat(this.company._id,"/accounts/").concat(this.loggedInUser._id),thumb:!1},entity:this.company._id});case 4:e=t.sent,this.mutableUser.avatar=Object(l["get"])(e,"data.url");case 6:return a=this.fullName.split(" "),this.mutableUser.firstName=a[0],this.mutableUser.lastName=a[1],t.next=11,this.patchUser([this.loggedInUser._id,this.mutableUser]);case 11:this.isUpdatePending=!1,this.showSnackbar({message:"Profile updated"});case 13:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()})},o=u,d=(a("dde6"),a("2877")),m=Object(d["a"])(o,r,n,!1,null,"755428df",null);m.options.__file="AccountProfile.vue";e["default"]=m.exports},dde6:function(t,e,a){"use strict";var r=a("ed87"),n=a.n(r);n.a},ed87:function(t,e,a){}}]);
//# sourceMappingURL=chunk-71f655ec.1017722a.js.map
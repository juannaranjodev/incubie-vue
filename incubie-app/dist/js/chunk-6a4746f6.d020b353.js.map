{"version":3,"sources":["webpack:///./src/views/board/BoardUpdate.vue?c77e","webpack:///src/views/board/BoardUpdate.vue","webpack:///./src/views/board/BoardUpdate.vue?3568","webpack:///./src/views/board/BoardUpdate.vue","webpack:///./src/views/board/BoardUpdate.vue?9602"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","xs12","sm8","lg6","staticClass","small","ref","on","submit","$event","preventDefault","updateImage","wrap","board","mutableBoard","size","color","fab","click","chooseImage","_v","type","change","handleImageFile","label","rules","$rules","required","model","value","callback","$$v","$set","expression","loading","isUpdatePending","flat","staticRenderFns","BoardUpdatevue_type_script_lang_js_","name","components","props","data","tmpImage","computed","Object","objectSpread","vuex_esm","company","currentBoard","image","watch","immediate","handler","description","createdDate","created","methods","patchBoard","showSnackbar","$refs","imageFileInput","_handleImageFile","asyncToGenerator","regeneratorRuntime","mark","_callee2","e","file","reader","_this","_context2","prev","next","lodash","FileReader","readAsDataURL","onload","_ref","_callee","_context","target","result","stop","_x2","apply","arguments","_x","_updateImage","_callee3","form","uploadRes","_context3","updateBoardForm","$dispatchAction","$actionTypes","UPLOAD_IMAGES","payload","uri","bucket","concat","_id","thumb","entity","sent","validate","message","$router","push","params","boardSlug","slug","board_BoardUpdatevue_type_script_lang_js_","component","componentNormalizer","options","__file","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_BoardUpdate_vue_vue_type_style_index_0_id_8c07376c_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_BoardUpdate_vue_vue_type_style_index_0_id_8c07376c_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/chunk-6a4746f6.d020b353.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-flex',{attrs:{\"xs12\":\"\",\"sm8\":\"\",\"lg6\":\"\"}},[_c('v-container',{staticClass:\"i-board\",attrs:{\"small\":\"\"}},[_c('v-card',{staticClass:\"mb-5\"},[_c('v-form',{ref:\"updateBoardForm\",on:{\"submit\":function($event){$event.preventDefault();return _vm.updateImage($event)}}},[_c('v-card-text',[_c('v-layout',{attrs:{\"wrap\":\"\"}},[_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('div',{staticClass:\"i-board__image\"},[_c('i-board-icon',{attrs:{\"board\":_vm.mutableBoard,\"size\":155}}),_c('v-btn',{staticClass:\"i-board__image-edit\",attrs:{\"color\":\"accent\",\"small\":\"\",\"fab\":\"\"},on:{\"click\":function($event){$event.preventDefault();return _vm.chooseImage($event)}}},[_c('v-icon',[_vm._v(\"edit\")])],1),_c('input',{ref:\"imageFileInput\",staticClass:\"i-board__image-input\",attrs:{\"type\":\"file\"},on:{\"change\":_vm.handleImageFile}})],1)]),_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('v-text-field',{attrs:{\"label\":\"Name\",\"color\":\"accent\",\"rules\":[_vm.$rules.required()]},model:{value:(_vm.mutableBoard.name),callback:function ($$v) {_vm.$set(_vm.mutableBoard, \"name\", $$v)},expression:\"mutableBoard.name\"}})],1),_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('v-text-field',{attrs:{\"label\":\"Description\",\"color\":\"accent\"},model:{value:(_vm.mutableBoard.description),callback:function ($$v) {_vm.$set(_vm.mutableBoard, \"description\", $$v)},expression:\"mutableBoard.description\"}})],1),_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('v-text-field',{attrs:{\"label\":\"Created At\",\"color\":\"accent\"},model:{value:(_vm.mutableBoard.createdDate),callback:function ($$v) {_vm.$set(_vm.mutableBoard, \"createdDate\", $$v)},expression:\"mutableBoard.createdDate\"}})],1)],1)],1),_c('v-card-actions',{staticClass:\"justify-end\"},[_c('v-btn',{attrs:{\"loading\":_vm.isUpdatePending,\"type\":\"submit\",\"color\":\"accent\",\"flat\":\"\"}},[_vm._v(\"\\n            Update\\n          \")])],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-flex xs12 sm8 lg6>\n    <v-container\n      small\n      class=\"i-board\">\n      <v-card class=\"mb-5\">\n        <v-form ref=\"updateBoardForm\" @submit.prevent=\"updateImage\">\n          <v-card-text>\n            <v-layout wrap>\n              <v-flex xs12>\n                <div class=\"i-board__image\">\n                  <i-board-icon\n                    :board=\"mutableBoard\"\n                    :size=\"155\"/>\n                  <v-btn\n                    color=\"accent\"\n                    small\n                    fab\n                    class=\"i-board__image-edit\"\n                    @click.prevent=\"chooseImage\">\n                    <v-icon>edit</v-icon>\n                  </v-btn>\n\n                  <input\n                    ref=\"imageFileInput\"\n                    type=\"file\"\n                    class=\"i-board__image-input\"\n                    @change=\"handleImageFile\">\n                </div>\n              </v-flex>\n\n              <v-flex xs12>\n                <v-text-field\n                  v-model=\"mutableBoard.name\"\n                  label=\"Name\"\n                  color=\"accent\"\n                  :rules=\"[$rules.required()]\"/>\n              </v-flex>\n              <v-flex xs12>\n                <v-text-field\n                  v-model=\"mutableBoard.description\"\n                  label=\"Description\"\n                  color=\"accent\"/>\n              </v-flex>\n              <v-flex xs12>\n                <v-text-field\n                  v-model=\"mutableBoard.createdDate\"\n                  label=\"Created At\"\n                  color=\"accent\"/>\n              </v-flex>\n            </v-layout>\n          </v-card-text>\n          <v-card-actions\n            class=\"justify-end\">\n            <v-btn\n              :loading=\"isUpdatePending\"\n              type=\"submit\"\n              color=\"accent\"\n              flat>\n              Update\n            </v-btn>\n          </v-card-actions>\n        </v-form>\n      </v-card>\n    </v-container>\n  </v-flex>\n</template>\n\n<script>\nimport { mapActions, mapGetters, mapMutations } from 'vuex'\nimport { get } from 'lodash'\n\nexport default {\n  name: 'BoardUpdate',\n  components: {},\n  props: {},\n  data () {\n    return {\n      tmpImage: null,\n      mutableBoard: null,\n      isUpdatePending: false\n    }\n  },\n  computed: {\n    ...mapGetters('auth', ['loggedInUser']),\n    ...mapGetters('companies', {\n      company: 'current'\n    }),\n    ...mapGetters('boards', {\n      currentBoard: 'current'\n    }),\n    image () {\n      return this.tmpImage || this.currentBoard.image;\n    },\n  },\n  watch: {\n    currentBoard: {\n      immediate: true,\n      handler (board) {\n        this.mutableBoard = {\n          name: board.name,\n          description: board.description,\n          createdDate: board.createdDate,\n          image: board.image,\n        }\n      }\n    }\n  },\n  created () {},\n  methods: {\n    ...mapActions('boards', {\n      patchBoard: 'patch'\n    }),\n    ...mapMutations('snackbar', {\n      showSnackbar: 'show'\n    }),\n    chooseImage () {\n      this.$refs.imageFileInput.click()\n    },\n    async handleImageFile (e) {\n      const file = get(e, 'currentTarget.files[0]')\n\n      if (file) {\n        const reader = new FileReader()\n        reader.readAsDataURL(file)\n\n        reader.onload = async e => {\n          const data = e.target.result\n\n          this.mutableBoard.image = data\n        }\n      }\n    },\n    async updateImage () {\n\n      this.isUpdatePending = true\n      const form = this.$refs.updateBoardForm;\n        if (this.mutableBoard.image !== this.currentBoard.image) {\n          const uploadRes = await this.$dispatchAction({\n            type: this.$actionTypes.UPLOAD_IMAGES,\n            payload: {\n              uri: this.mutableBoard.image,\n              bucket: `${this.company._id}/boards/${this.currentBoard._id}`,\n              thumb: false\n            },\n            entity: this.company._id\n          })\n\n          this.mutableBoard.image = get(uploadRes, 'data.url');\n        }\n      if(form.validate()) {\n        await this.patchBoard([this.currentBoard._id, this.mutableBoard]);\n        this.showSnackbar({ message: 'Board details updated' });\n        this.$router.push({name: \"board/settings\", params: {boardSlug: this.currentBoard.slug}});\n      }else {\n        this.showSnackbar({ message: 'Invalid validation', color:'error' });\n      }\n\n      this.isUpdatePending = false\n    }\n  }\n}\n</script>\n\n<style lang=\"stylus\" scoped>\n  @import \"~@/assets/stylus/settings/_variables\"\n  @import \"~@/assets/stylus/settings/_colors\"\n\n  .i-board {\n\n    &__image {\n      display: inline-flex\n      margin: $spacers.two.y 0 $spacers.four.y 0\n      position: relative\n\n      &:before {\n        color: $grey.darken-1\n        content: 'Image'\n        font-size: 12px\n        left: 0\n        position: absolute\n        top: -8px\n      }\n\n      &-edit {\n        position: absolute\n        right: 0\n        top: 0\n        transform: translate(25%, -25%)\n      }\n\n      &-input {\n        display: none\n      }\n    }\n  }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoardUpdate.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoardUpdate.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BoardUpdate.vue?vue&type=template&id=8c07376c&scoped=true&\"\nimport script from \"./BoardUpdate.vue?vue&type=script&lang=js&\"\nexport * from \"./BoardUpdate.vue?vue&type=script&lang=js&\"\nimport style0 from \"./BoardUpdate.vue?vue&type=style&index=0&id=8c07376c&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8c07376c\",\n  null\n  \n)\n\ncomponent.options.__file = \"BoardUpdate.vue\"\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoardUpdate.vue?vue&type=style&index=0&id=8c07376c&lang=stylus&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BoardUpdate.vue?vue&type=style&index=0&id=8c07376c&lang=stylus&scoped=true&\""],"sourceRoot":""}
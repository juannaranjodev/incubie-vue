(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2669ff74"],{"1d9d":function(t,a,e){"use strict";var s=e("5e1a7"),n=e.n(s);n.a},4415:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-container",{attrs:{"grid-list-md":""}},[e("v-layout",{attrs:{column:""}},[e("v-flex",{attrs:{xs12:"",sm9:"",md5:""}},[e("v-card",[e("v-card-title",[e("p",{staticClass:"caption"},[t._v("Your Plan")])]),e("v-card-text",[e("p",{staticClass:"title"},[t._v(t._s(t.loggedInUser.stripe.plan))]),e("p",{staticClass:"caption"},[t._v(" Active Users: "+t._s(t.activeUsers)+" / "+t._s(t.headcount)+" ")])]),e("v-card-actions",[e("v-spacer"),e("v-btn",{attrs:{to:"company.users",color:"accent"}},[t._v("\n            Add Users\n          ")])],1)],1)],1),e("v-flex",{attrs:{xs12:"",sm9:"",md5:""}},[e("v-card",[e("v-card-title",[e("p",{staticClass:"caption"},[t._v("Payment Method")])]),e("v-card-text",{staticClass:"mt-0"},[e("p",{staticClass:"title"},[t._v(" "+t._s(this.cardBrand)+" Ending in "+t._s(this.cardLast4)+" ")])]),e("v-card-actions",[e("v-spacer"),e("v-btn",{attrs:{flat:""},on:{click:t.setPayInfo}},[t._v("\n            Change Payment\n          ")])],1)],1)],1),e("v-flex",{attrs:{xs12:"",sm9:"",md5:""}},[e("v-card",[e("v-card-title",[e("p",{staticClass:"caption"},[t._v("Recent Payments")])]),e("v-card-text",t._l(t.invoices,function(a){return e("v-list",{key:a.id},[e("v-list-tile",[e("v-layout",{attrs:{row:"","space-between":""}},[e("v-flex",[e("p",{staticClass:"title mb-0"},[t._v("$"+t._s(a.amount/100))])]),e("v-flex",[e("p",{staticClass:"title mb-0"},[t._v(t._s(a.created))])]),e("v-flex",[e("p",{staticClass:"title mb-0"},[t._v("xxxx xxxx "+t._s(a.source.last4))])])],1),e("v-divider")],1)],1)}))],1)],1)],1)],1)},n=[],c=(e("ac6a"),e("c93e")),i=e("5fb0"),o=e("2f62"),r=(e("2ef0"),i["stripeOptions"].planData),d={name:"CompanyBilling",components:{},data:function(){return{cardBrand:"",cardLast4:"",invoices:[],activeUsers:0,headcount:0}},computed:Object(c["a"])({},Object(o["c"])("companies",{company:"current"}),Object(o["c"])("auth",["loggedInUser"])),mounted:function(){this.getInvoices()},methods:Object(c["a"])({},Object(o["d"])("snackbar",{showSnackbar:"show"}),{setPayInfo:function(){var t=this;this.loggedInUser.stripe&&("Free"!=this.loggedInUser.stripe.plan?this.$checkout.open({name:"Enjoy Incubie!",panelLabel:"Change Payment",currency:"USD",amount:0,token:function(a){t.changePayment(r.incubiePremium,a)},closed:function(){console.log("ruby : stripe payment method changed...")}}):this.showSnackbar({color:"error",message:"Upgrade required."}))},changePayment:function(t,a){var e=this;this.$dispatchAction({type:this.$actionTypes.SET_PAYMENT_INFO,entity:this.company._id,payload:{token:a,userId:this.loggedInUser._id,planData:t}}).then(function(t){if(t.data.success){var a=t.data.customer,s=a.sources.data[0];e.cardBrand=s.brand,e.cardLast4=s.last4}})},getInvoices:function(){var t=this;this.$dispatchAction({type:this.$actionTypes.GET_PAYMENT_INFO,entity:this.company._id,payload:{userId:this.loggedInUser._id}}).then(function(a){console.log("ruby : getInvoices : res = ",a.data),t.invoices=a.data.invoices,t.invoices&&(t.invoices.forEach(function(t){var a=1e3*parseInt(t.created),e=new Date(a),s=""+(e.getMonth()+1),n=""+e.getDate(),c=e.getFullYear();s.length<2&&(s="0"+s),n.length<2&&(n="0"+n),t.created=[c,s,n].join("-"),console.log(t.created)}),t.cardBrand=a.data.customer.sources.data[0].brand,t.cardLast4=a.data.customer.sources.data[0].last4,t.headcount=a.data.headcount,t.activeUsers=a.data.activeUsers)})},getActiveUserCount:function(){}})},l=d,v=(e("1d9d"),e("2877")),u=Object(v["a"])(l,s,n,!1,null,"112bc8f2",null);u.options.__file="CompanyBilling.vue";a["default"]=u.exports},"5e1a7":function(t,a,e){}}]);
//# sourceMappingURL=chunk-2669ff74.d4188864.js.map
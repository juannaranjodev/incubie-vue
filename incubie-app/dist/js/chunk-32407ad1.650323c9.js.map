{"version":3,"sources":["webpack:///./src/views/upgrade/Upgrade.vue?bd5f","webpack:///src/views/upgrade/Upgrade.vue","webpack:///./src/views/upgrade/Upgrade.vue?8bea","webpack:///./src/views/upgrade/Upgrade.vue","webpack:///./src/views/upgrade/Upgrade.vue?ce03"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","row","align-center","staticClass","_v","grid-list-md","xs12","sm10","offset-sm1","justify-center","fill-height","wrap","_l","plan","key","id","sm4","class","color","max-width","height","raised","_s","specificPlan","name","feature","priceCaption","block","disabled","on","click","$event","checkout","_e","staticRenderFns","planData","constants","Upgradevue_type_script_lang_js_","data","plans","incubieFree","features","destination","incubiePremium","incubieEnterprise","computed","Object","objectSpread","vuex_esm","company","methods","showSnackbar","_this","loggedInUser","stripe","currentPlan","playStripe","message","updateIdeas","$checkout","open","currency","amount","price","token","_token","closed","console","log","isDowngrade","$dispatchAction","type","$actionTypes","UPDATE_IDEA_CHECKS","entity","_id","payload","user","then","res","_this2","STRIPE_OPEN","userId","updatedLoggedInUser","upgrade_Upgradevue_type_script_lang_js_","component","componentNormalizer","options","__file","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Upgrade_vue_vue_type_style_index_0_lang_stylus_scroped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Upgrade_vue_vue_type_style_index_0_lang_stylus_scroped_true___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/chunk-32407ad1.650323c9.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('v-layout',{attrs:{\"row\":\"\",\"align-center\":\"\"}},[_c('v-flex',[_c('h1',{staticClass:\"font-weight-thin display-2 text-xs-center mt-5\"},[_vm._v(\" Never. Stop. Innovating. \")])])],1),_c('v-container',{attrs:{\"grid-list-md\":\"\"}},[_c('v-flex',{attrs:{\"xs12\":\"\",\"sm10\":\"\",\"offset-sm1\":\"\"}},[_c('v-layout',{staticClass:\"mt-5\",attrs:{\"align-center\":\"\",\"justify-center\":\"\",\"row\":\"\",\"fill-height\":\"\",\"wrap\":\"\"}},_vm._l((_vm.plans),function(plan){return _c('v-flex',{key:plan.id,attrs:{\"xs12\":\"\",\"sm4\":\"\"}},[_c('v-card',{class:plan.color +'-border',attrs:{\"max-width\":\"250\",\"height\":\"320\",\"raised\":plan.raised}},[_c('v-card-title',{staticClass:\"text-xs-center headline font-weight-bold\"},[_vm._v(\" \"+_vm._s(plan.specificPlan.name)+\" \")]),_c('v-list',_vm._l((plan.features),function(feature){return _c('v-list-tile',{key:feature.id,staticClass:\"py-0\"},[_c('p',{staticClass:\"title\"},[_vm._v(\" \"+_vm._s(feature)+\" \")])])})),_c('h2',{staticClass:\"headline text-xs-center mb-1\"},[_vm._v(_vm._s(plan.priceCaption))]),_c('v-card-actions',[_c('v-btn',{staticClass:\"white--text font-weight-bold\",attrs:{\"block\":\"\",\"color\":plan.color,\"disabled\":plan.disabled},on:{\"click\":function($event){_vm.checkout(plan.specificPlan)}}},[(plan.id == 3)?_c('v-icon',{staticClass:\"mr-1\"},[_vm._v(\"phone\")]):_vm._e(),_vm._v(\" Choose \"+_vm._s(plan.specificPlan.name)+\" \")],1)],1)],1)],1)}))],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n  <v-layout row align-center>\n    <v-flex>\n      <h1 class=\"font-weight-thin display-2 text-xs-center mt-5\"> Never. Stop. Innovating. </h1>\n    </v-flex>\n  </v-layout>\n  <v-container grid-list-md>\n    <v-flex xs12 sm10 offset-sm1>\n    <v-layout align-center justify-center row fill-height wrap class=\"mt-5\">\n      <v-flex xs12 sm4 v-for=\"plan in plans\" :key=\"plan.id\">\n        <v-card max-width=\"250\" height=\"320\" :raised=\"plan.raised\" :class=\"plan.color +'-border'\">\n          <v-card-title class=\"text-xs-center headline font-weight-bold\"> {{ plan.specificPlan.name }} </v-card-title>\n            <v-list>\n              <v-list-tile v-for=\"feature in plan.features\" :key=\"feature.id\" class=\"py-0\"><p class=\"title\"> {{ feature }} </p></v-list-tile>\n            </v-list>\n            <!-- <h2 class=\"headline text-xs-center mb-1\" v-if=\"plan.id == 3\">{{ plan.phone }}</h2> -->\n            <h2 class=\"headline text-xs-center mb-1\">{{ plan.priceCaption }}</h2>\n            <v-card-actions>\n              <!-- ray test touch -->\n              <v-btn class=\"white--text font-weight-bold\" block :color=\"plan.color\" @click=\"checkout(plan.specificPlan)\" :disabled=\"plan.disabled\"><v-icon v-if=\"plan.id == 3\" class=\"mr-1\">phone</v-icon> Choose {{ plan.specificPlan.name }} </v-btn>\n            </v-card-actions>\n        </v-card>\n      </v-flex>\n    </v-layout>\n    </v-flex>\n  </v-container>\n  </div>\n</template>\n\n<script>\n// ruby test added <\nimport { stripeOptions } from '@/constants';\nimport { mapState, mapMutations } from 'vuex';\nimport { get } from 'lodash';\nimport { mapGetters } from \"vuex\";\nlet planData = stripeOptions.planData;\n// ruby test added >\n\nexport default {\n  data () {\n    return {\n      plans: [{\n        id: '1',\n        specificPlan: planData.incubieFree,\n        color: \"grey\",\n        features: ['50 Ideas', 'Unlimited Users',''],\n        priceCaption: '$0',\n        destination: 'company/billing',\n      },\n      {\n        id: '2',\n        specificPlan: planData.incubiePremium,\n        color: \"teal\",\n        features: ['1000 Ideas', 'Unlimited Users', 'Private Boards'],\n        priceCaption: '$1/Active User',\n        raised: 'raised',\n        destination: 'company/billing',\n      },\n      {\n        id: '3',\n        specificPlan: planData.incubieEnterprise,\n        color: \"amber\",\n        features: ['Unlimited Ideas', 'Unlimited Users', 'Private Boards'],\n        priceCaption: 'Call Us',\n        destination: 'tel:7605937616'\n      },\n      ]\n    }\n  },\n  // ruby test added <\n  computed: {\n    ...mapGetters(\"companies\", {\n      company: \"current\"\n    }),\n    ...mapGetters(\"auth\", [\"loggedInUser\"]),\n  },\n  methods: {\n    // ruby test added <\n    ...mapMutations(\"snackbar\", {\n      showSnackbar: \"show\"\n    }),\n    // ruby test added >\n    checkout(specificPlan) {\n      if(!this.loggedInUser || !this.loggedInUser.stripe) {\n        return;\n      }\n      const currentPlan = this.loggedInUser.stripe.plan;\n      \n      // ray: block subscribing to the same plan\n      if (currentPlan == specificPlan.name) {\n        console.log('ray : the selected plan is the same as the current plan.');\n        return;\n      }\n\n      // ray: block enterprise plan for now\n      if (specificPlan.name == 'Enterprise') {\n        console.log('ray : the selected plan is enterprise plan.');\n        return;\n      }\n\n      if(specificPlan.name == 'Free'){\n          this.playStripe(specificPlan , {});\n          this.showSnackbar({color:\"error\", message: \"Warning! This will hide all ideas over the plan limit.\"});\n          this.updateIdeas(true);\n          return;\n      }\n\n      this.$checkout.open({\n        name: 'Enjoy Incubie!',\n        currency: 'USD',\n        amount: specificPlan.price,\n        token: (token) => {\n          this.playStripe(specificPlan, token);\n          this.updateIdeas(false);\n        },\n        closed: () => {\n          console.log('ray : stripe element closed...')\n        }\n      });\n    },\n\n    updateIdeas(isDowngrade) {\n      this.$dispatchAction({\n        type: this.$actionTypes.UPDATE_IDEA_CHECKS,\n        entity: this.company._id,\n        payload: {\n          user: this.loggedInUser,\n          isDowngrade : isDowngrade\n        }\n      }).then(res => {\n        console.log('ray : stripe dispatch then');\n        console.log(res);\n      })\n    },\n\n    playStripe(specificPlan, token){\n      let that = this;\n      this.$dispatchAction({\n        type: this.$actionTypes.STRIPE_OPEN,\n        entity: this.company._id,\n        payload: {\n          token: token,\n          userId: this.loggedInUser._id,\n          planData: specificPlan\n        }\n      }).then(res => {\n        console.log('ray : stripe dispatch then');\n        let updatedLoggedInUser = res.data.user;\n        console.log(updatedLoggedInUser);\n        this.loggedInUser.stripe = updatedLoggedInUser.stripe;\n      })\n    }\n  }\n  // ruby test added >\n}\n</script>\n\n<style lang=\"stylus\" scroped>\n@import '~@/assets/stylus/settings/_colors'\n\n.grey-border  {\n  border: 3px solid $grey.darken-1;\n  max-width: 250px\n}\n.teal-border {\n  border: 3px solid $teal.darken-1;\n  max-width: 250px;\n}\n.amber-border {\n  border: 3px solid $amber.darken-1;\n  max-width: 250px;\n}\n</style>\n\n\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Upgrade.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Upgrade.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Upgrade.vue?vue&type=template&id=4dc5d11f&\"\nimport script from \"./Upgrade.vue?vue&type=script&lang=js&\"\nexport * from \"./Upgrade.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Upgrade.vue?vue&type=style&index=0&lang=stylus&scroped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"Upgrade.vue\"\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Upgrade.vue?vue&type=style&index=0&lang=stylus&scroped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Upgrade.vue?vue&type=style&index=0&lang=stylus&scroped=true&\""],"sourceRoot":""}
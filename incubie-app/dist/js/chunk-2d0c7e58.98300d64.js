(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c7e58"],{5326:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-form",{ref:"loginForm",on:{submit:function(t){t.preventDefault(),e.login()}}},[r("v-card",{staticClass:"auth__card"},[r("v-alert",{staticClass:"mb-2",attrs:{value:e.authenticateError,type:"error"}},[e._v("\n      "+e._s(e.authenticateError)+"\n    ")]),e.user?r("v-card-title",{staticClass:"auth__title pt-4"},[r("span",{staticClass:"subheading"},[e._v("\n        To continue, first verify it's you\n      ")])]):e._e(),r("v-card-text",[r("v-btn",{staticClass:"btn__social",attrs:{disabled:"",large:"",block:""},on:{click:function(t){return t.preventDefault(),e.launchGoogleSignIn(t)}}},[r("i",[r("img",{attrs:{src:"/images/icons/google.svg"}})]),e._v("\n        Log In with Google\n      ")]),r("div",{staticClass:"auth__divider"},[r("span"),r("span",[e._v("or")]),r("span")])],1),r("v-card-text",{staticClass:"py-0"},[e.user?r("i-user",{staticClass:"mb-3",attrs:{user:e.user,size:30,"show-score":!1}}):r("v-text-field",{attrs:{"validate-on-blur":!0,rules:[e.$rules.required(),e.$rules.email()],autofocus:"",type:"email",label:"Email"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),r("v-text-field",{ref:"password",attrs:{"validate-on-blur":!0,rules:[e.$rules.required()],type:"password",label:"Enter your password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),r("v-card-actions",[r("v-btn",{attrs:{loading:e.isAuthenticatePending,type:"submit",color:"accent",large:"",block:""}},[e.user?r("span",[e._v("Continue")]):r("span",[e._v("Log In")])])],1)],1)],1)},s=[],a=(r("96cf"),r("3040")),i=r("c93e"),u=r("2f62"),c=r("2ef0"),o=r("6bd9"),l={name:"Login",components:{},props:{slug:{type:String,required:!1,default:null},userId:{type:String,required:!1,default:null}},data:function(){return{user:null,email:null,password:null,strategy:"local"}},computed:Object(i["a"])({},Object(u["e"])("auth",["isAuthenticatePending","errorOnAuthenticate"]),{form:function(){return{id:Object(c["get"])(this.user,"_id"),email:Object(c["get"])(this.user,"email")||this.email,password:this.password,strategy:this.strategy,slug:this.slug}},authenticateError:function(){return this.errorOnAuthenticate?this.errorOnAuthenticate.error:null}}),watch:{},mounted:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("auth/clearAll");case 2:return e.next=4,this.$store.dispatch("auth/logout");case 4:if(t=this.userId,!t){e.next=11;break}return e.next=8,this.$store.dispatch("users/get",[t,Object(o["paramsForServer"])({action:"getPublicProfile"})]);case 8:r=e.sent,this.user=r,this.$refs.password.focus();case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),created:function(){},destroyed:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.clearAuthenticateError();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),methods:Object(i["a"])({},Object(u["d"])("auth",["clearAuthenticateError","setAuthenticatePending","setAuthenticateError","unsetAuthenticatePending"]),Object(u["b"])("auth",["authenticate","logout"]),{login:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t,r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.clearAuthenticateError();case 2:if(!this.$refs.loginForm.validate()){e.next=30;break}return this.setAuthenticatePending(!0),e.prev=4,e.next=7,this.authenticate(this.form);case 7:if(!this.slug){e.next=13;break}return t={name:"feed/main",params:{slug:this.slug}},e.next=11,this.$store.dispatch("worker/subscribe");case 11:e.next=14;break;case 13:t=Object(c["get"])(this.$route,"query.redirect")||{name:"root"};case 14:console.log("redirect: ",t),this.$router.push(t),e.next=29;break;case 18:if(e.prev=18,e.t0=e["catch"](4),r=Object(c["get"])(e.t0,"code"),n=Object(c["get"])(e.t0,"data.message","error"),console.dir(e.t0),403!==r){e.next=27;break}this.$router.push({name:"unauthorized"}),e.next=29;break;case 27:return e.next=29,this.setAuthenticateError({error:n});case 29:this.unsetAuthenticatePending();case 30:case"end":return e.stop()}},e,this,[[4,18]])}));return function(){return e.apply(this,arguments)}}()})},h=l,d=r("2877"),p=Object(d["a"])(h,n,s,!1,null,null,null);p.options.__file="Login.vue";t["default"]=p.exports}}]);
//# sourceMappingURL=chunk-2d0c7e58.98300d64.js.map
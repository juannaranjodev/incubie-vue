(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-531a78e1"],{1604:function(e,t,a){},"2cce":function(e,t,a){},4868:function(e,t,a){"use strict";var i=a("ecd6"),n=a.n(i);n.a},"51be":function(e,t,a){},"6b61":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("main-toolbar"),a("main-menu"),a("main-snackbar"),a("v-content",[""===e.searchText?a("router-view",{attrs:{name:"toolbar"}}):e._e(),a("i-parallax",{staticClass:"background-image",attrs:{src:e.backgroundTile}},[a("v-container",{attrs:{fluid:"","fill-height":"","ma-0":"","pa-0":""}},[a("v-layout",[a("div",{staticClass:"main",class:{"main_search-results":""!==e.searchText}},[e.isLoading?a("i-loading"):""!==e.searchText?a("result-main"):e._e(),a("router-view",{directives:[{name:"show",rawName:"v-show",value:""===e.searchText&&!e.isLoading,expression:"searchText === '' && !isLoading"}]})],1)])],1)],1)],1)],1)},n=[],s=(a("96cf"),a("3040")),r=a("c93e"),o=(a("cadf"),a("551c"),a("097d"),a("2f62")),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-toolbar",{staticClass:"main-toolbar",attrs:{app:"",dark:"",color:"secondary","clipped-left":!0}},[a("transition",{attrs:{name:"fade",mode:"out-in"}},[!e.showSearchField&&e.$vuetify.breakpoint.smAndDown||!e.$vuetify.breakpoint.smAndDown?a("v-layout",{key:"nav-bar",attrs:{"align-center":"",row:"","fill-height":"","justify-space-between":!0}},[a("div",{staticClass:"main-toolbar__logo"},[a("v-toolbar-side-icon",{staticClass:"mr-4",on:{click:e.toggleMenu}}),a("router-link",{attrs:{to:{name:"feed/main"}}},[a("img",{attrs:{src:"/images/incubie-logo_alpha.svg"}})])],1),a("div",{staticClass:"main-toolbar__actions"},[a("transition",{attrs:{name:"slide-fade",mode:"out-in"}},[e.showSearchField&&!e.$vuetify.breakpoint.smAndDown?a("div",{staticClass:"main-toolbar__search"},[a("v-text-field",{staticClass:"main-toolbar__search-input",attrs:{solo:"","append-icon":"search",placeholder:"Search"},model:{value:e.searchData,callback:function(t){e.searchData=t},expression:"searchData"}}),e.searchData.length?a("v-icon",{on:{click:e.clearSearchData}},[e._v("close")]):e._e()],1):e._e(),e.showSearchField||e.$vuetify.breakpoint.smAndDown?e._e():a("v-btn",{key:"search",attrs:{icon:""},on:{click:e.openSearchField}},[a("v-icon",[e._v("search")])],1)],1),a("v-btn",{staticClass:"hidden-xs-only",attrs:{to:{name:"upgrade"},flat:"",color:"accent"}},[e._v("\n                    UPGRADE NOW\n                ")]),e.$vuetify.breakpoint.smAndDown?a("v-btn",{key:"search",class:{"ml-a":e.$vuetify.breakpoint.xsOnly},attrs:{icon:""},on:{click:e.openSearchField}},[a("v-icon",[e._v("search")])],1):e._e()],1)]):e._e(),e.showSearchField&&e.$vuetify.breakpoint.smAndDown?a("v-layout",{key:"search-bar",attrs:{"align-center":"",row:"","fill-height":"","justify-space-between":!0}},[a("div",{staticClass:"main-toolbar__search"},[a("v-text-field",{ref:"mobileSearchInput",staticClass:"main-toolbar__search-input",attrs:{solo:"",placeholder:"Search"},model:{value:e.searchData,callback:function(t){e.searchData=t},expression:"searchData"}})],1),a("div",{staticClass:"main-toolbar__actions"},[a("v-btn",{staticClass:"ml-a",attrs:{icon:""},on:{click:e.clearSearchData}},[a("v-icon",[e._v("close")])],1)],1)]):e._e()],1)],1)},l=[],d={name:"MainToolbar",components:{},props:{},data:function(){return{displayMobileSearch:!1,readyForSearch:!1}},computed:Object(r["a"])({},Object(o["d"])("search",{setSearch:"setValue"}),Object(o["c"])("boards",{board:"current"}),Object(o["c"])("votes",{getVotes:"find"}),Object(o["e"])("search",{searchText:"value"}),{showSearchField:{get:function(){return this.searchText.length>0||this.readyForSearch},set:function(){}},searchData:{get:function(){return this.searchText},set:function(e){this.SET_SEARCH(e)}}}),watch:{searchText:{handler:function(e,t){""==e&&""!=t&&(this.readyForSearch=!1)}}},created:function(){},methods:Object(r["a"])({},Object(o["b"])("ui",["toggleMainMenu","toggleMainMenuMini"]),Object(o["b"])("search",["SET_SEARCH"]),{toggleMenu:function(){this.$vuetify.breakpoint.smAndDown?this.toggleMainMenu():this.toggleMainMenuMini()},clearSearchData:function(){this.searchData="",this.readyForSearch=!1},openSearchField:function(){this.readyForSearch=!0}})},u=d,m=(a("c8c3"),a("db46"),a("7879"),a("2877")),p=Object(m["a"])(u,c,l,!1,null,"e37f5b34",null);p.options.__file="MainToolbar.vue";var h=p.exports,v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-navigation-drawer",{staticClass:"secondary darken-1 main-menu",attrs:{value:e.isMainMenuOpen,"mini-variant":e.$vuetify.breakpoint.mdAndUp&&e.isMainMenuMini,permanent:e.$vuetify.breakpoint.mdAndUp,clipped:!0,app:"",width:"220"},on:{input:e.setMainMenuOpen}},[a("v-list",{staticClass:"pa-0 transparent",attrs:{dark:"","two-line":""}},[a("v-list-tile",{staticClass:"main-menu__whoami",class:{"v-list__tile--highlighted":e.isUserMenuVisible},attrs:{avatar:""},on:{click:e.toggleUserMenu}},[e.$vuetify.breakpoint.mdAndUp&&e.isMainMenuMini?a("v-list-tile-avatar",[a("i-company-icon",{attrs:{company:e.company,size:40}})],1):e._e(),a("v-list-tile-content",[a("v-list-tile-title",{staticClass:"main-menu__company-name"},[e._v("\n          "+e._s(e.company.name)+"\n          "),a("v-icon",{staticClass:"main-menu__user-menu-arrow",attrs:{size:16}},[e._v("keyboard_arrow_down\n          ")])],1),a("v-list-tile-sub-title",[e._v("\n          "+e._s(e.loggedInUser.firstName)+"\n          "+e._s(e.loggedInUser.lastName)+"\n        ")])],1)],1),a("v-divider",{attrs:{inset:""}}),a("v-menu",{staticClass:"main-menu__user-menu",attrs:{"min-width":300,"position-x":8,"position-y":124},model:{value:e.isUserMenuVisible,callback:function(t){e.isUserMenuVisible=t},expression:"isUserMenuVisible"}},[a("v-card",[a("v-list",{staticClass:"pa-0",attrs:{"two-line":""}},[a("v-list-tile",{attrs:{avatar:""}},[a("v-list-tile-avatar",[a("i-user-icon",{attrs:{user:e.loggedInUser,size:40}})],1),a("v-list-tile-content",[a("v-list-tile-title",{staticClass:"font-weight-bold"},[e._v("\n                "+e._s(e.loggedInUser.firstName)+"\n                "+e._s(e.loggedInUser.lastName)+"\n              ")]),a("v-list-tile-sub-title",[e._v(e._s(e.loggedInUser.voteCount)+" points")])],1)],1)],1),a("v-list",{staticClass:"pt-0",attrs:{dense:""}},[a("v-list-tile",{attrs:{to:{name:"account/profile"}}},[a("v-list-tile-title",{staticClass:"body-2"},[e._v("Profile & account")])],1),a("v-list-tile",{attrs:{to:{name:"logout"}}},[a("v-list-tile-title",{staticClass:"body-2"},[e._v("Sign out")])],1)],1),a("v-spacer",{staticClass:"main-menu__user-menu__spacer"}),e.isAdmin(e.loggedInUser,e.company._id)?a("div",[a("v-list",{staticClass:"pb-0"},[a("v-list-tile",{attrs:{avatar:""}},[a("v-list-tile-avatar",[a("i-company-icon",{attrs:{company:e.company,size:40}})],1),a("v-list-tile-content",[a("v-list-tile-title",{staticClass:"font-weight-bold"},[e._v("\n                  "+e._s(e.company.name)+"\n                ")])],1)],1)],1),e.isAdmin(e.loggedInUser,e.company._id)?a("v-list",{staticClass:"pt-0",attrs:{dense:""}},[a("v-list-tile",{attrs:{to:{name:"company/home"}}},[a("v-list-tile-title",{staticClass:"body-2"},[e._v("Administration")])],1),a("v-list-tile",{attrs:{to:{name:"company/members"}}},[a("v-list-tile-title",{staticClass:"body-2"},[e._v("Invite members")])],1)],1):e._e(),a("v-spacer",{staticClass:"main-main__user-menu__spacer main-menu__user-menu__spacer--minor"}),a("v-list",{attrs:{dense:"","two-line":""}},[a("v-list-tile",{attrs:{to:{name:"company/home"}}},[a("v-list-tile-content",[a("v-list-tile-title",{staticClass:"body-2 font-weight-bold"},[e._v("Total Ideas")]),a("v-list-tile-sub-title",[e._v(e._s(e.company.ideasCount)+" / "+e._s(e.allowedIdeasCount))])],1),a("v-list-tile-action",[a("v-progress-circular",{attrs:{value:e.ideasCountPercentage,color:e.ideasCountProgressColor,width:5,size:50,rotate:270}})],1)],1)],1),a("v-spacer",{staticClass:"main-menu__user-menu__spacer main-menu__user-menu__spacer--minor"}),a("v-list",{attrs:{dense:"","two-line":""}},[a("v-list-tile",{attrs:{to:{name:"company/members"}}},[a("v-list-tile-content",[a("v-list-tile-title",{staticClass:"body-2 font-weight-bold"},[e._v("Total Members")]),a("v-list-tile-sub-title",[e._v(e._s(e.users.length)+" / "+e._s(e.allowedMembersCount))])],1),a("v-list-tile-action",[a("v-progress-circular",{attrs:{value:e.membersCountPercentage,color:e.membersCountProgressColor,width:5,size:50,rotate:270}})],1)],1)],1),a("v-spacer",{staticClass:"main-menu__user-menu__spacer main-menu__user-menu__spacer--minor"}),a("v-list",{attrs:{dense:""}},[a("v-list-tile",{attrs:{to:{name:"company/home"}}},[a("v-list-tile-title",{staticClass:"body-2"},[e._v("See paid plans")])],1)],1)],1):e._e(),a("v-spacer",{staticClass:"main-menu__user-menu__spacer"}),e.otherCompanies.length?a("v-list",{attrs:{dense:""}},e._l(e.otherCompanies,function(t){return a("v-list-tile",{key:t._id,attrs:{to:{name:"login",params:{slug:t.slug,userId:e.loggedInUser._id}}}},[a("v-list-tile-title",{staticClass:"body-2"},[e._v("\n              Switch to "),a("span",{staticClass:"font-weight-bold"},[e._v(e._s(t.name))])])],1)})):e._e()],1)],1)],1),a("v-list",{staticClass:"pt-0 transparent main-menu__boards",attrs:{dark:""}},[a("v-list-tile",{directives:[{name:"ripple",rawName:"v-ripple"}],class:{"main-menu__boards--active home-icon":"feed/main"===e.routeName},attrs:{to:{name:"feed/main"},light:""}},[a("v-list-tile-action",[e.isMainMenuMini&&e.$vuetify.breakpoint.mdAndUp?a("v-tooltip",{attrs:{right:""}},[a("v-icon",{attrs:{slot:"activator",size:32,color:"grey lighten-1"},slot:"activator"},[e._v("\n            home\n          ")]),a("span",{attrs:{color:"grey--text"}},[e._v("Home")])],1):a("v-icon",{attrs:{size:32,color:"secondary lighten-3"}},[e._v("home\n        ")])],1),a("v-list-tile-content",[a("v-list-tile-title",{staticClass:"grey--text"},[e._v("Home Board")])],1)],1),e._l(e.userBoards,function(t,i){return a("v-list-tile",{directives:[{name:"ripple",rawName:"v-ripple"}],key:t._id,class:{"main-menu__boards--active":t._id===e.currentBoardId},attrs:{to:{name:"board/main",params:{boardSlug:t.slug}}}},[a("v-list-tile-action",[e.isMainMenuMini&&e.$vuetify.breakpoint.mdAndUp?a("v-tooltip",{attrs:{right:""}},[a("i-board-icon",{class:{"pulse-animation":!e.ideas.length&&!e.boards.length&&0===i},attrs:{slot:"activator",board:t,size:32},slot:"activator"}),e._v("\n          "+e._s(t.name)+"\n        ")],1):a("i-board-icon",{class:{"pulse-animation":!e.ideas.length&&!e.boards.length&&0===i},attrs:{board:t,size:32}})],1),a("v-list-tile-content",[a("v-list-tile-title",[e._v(e._s(t.name))])],1)],1)}),a("v-list-tile",{attrs:{to:{name:"board/add",params:{slug:e.company.slug}}}},[a("v-list-tile-action",[e.isMainMenuMini&&e.$vuetify.breakpoint.mdAndUp?a("v-tooltip",{attrs:{right:""}},[a("v-icon",{attrs:{slot:"activator",size:32},slot:"activator"},[e._v("\n            add_circle_outline\n          ")]),e._v("\n          Add Board\n        ")],1):a("v-icon",{attrs:{size:32}},[e._v("add_circle_outline\n        ")])],1),a("v-list-tile-content",[a("v-list-tile-title",[e._v("Add Board")])],1)],1)],2)],1)},b=[],g={name:"MainMenu",components:{},props:{},data:function(){return{isUserMenuVisible:!1}},computed:Object(r["a"])({},Object(o["e"])("route",{routeName:"name"}),Object(o["e"])("ui",["isMainMenuOpen","isMainMenuMini"]),Object(o["c"])("auth",{loggedInUser:"loggedInUser",company:"loggedInUserCompany"}),Object(o["c"])("companies",{companies:"list",allowedIdeasCount:"allowedIdeasCount",allowedMembersCount:"allowedMembersCount"}),Object(o["c"])("users",{users:"list",isAdmin:"isAdmin"}),Object(o["c"])("boards",{currentBoardId:"currentId",getBoard:"get",boards:"list",boardsByUser:"byUser"}),Object(o["c"])("ideas",{ideas:"list"}),{otherCompanies:function(){var e=this;return this.companies.filter(function(t){return t._id!==e.company._id})},ideasCountPercentage:function(){return this.company.ideasCount/this.allowedIdeasCount*100},ideasCountProgressColor:function(){return this.ideasCountPercentage>75?"red":this.ideasCountPercentage>50?"yellow":"green"},membersCountPercentage:function(){return this.users.length/this.allowedMembersCount*100},membersCountProgressColor:function(){return this.membersCountPercentage>75?"red":this.membersCountPercentage>50?"yellow":"green"},userBoards:function(){return this.boardsByUser(this.loggedInUser)}}),watch:{},created:function(){},methods:Object(r["a"])({},Object(o["d"])("ui",["setMainMenuOpen"]),{toggleUserMenu:function(){this.isUserMenuVisible=!this.isUserMenuVisible}})},f=g,_=(a("ddf9"),Object(m["a"])(f,v,b,!1,null,null,null));_.options.__file="MainMenu.vue";var y=_.exports,C=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-snackbar",{attrs:{value:e.isSnackbarVisible,timeout:e.timeout,color:e.color,vertical:e.$vuetify.breakpoint.smAndDown,top:"",absolute:""},on:{input:e.dismiss}},[a("strong",[e._v(e._s(e.message))]),a("v-btn",{attrs:{color:"white",flat:""},on:{click:e.dismiss}},[e._v("\n    Close\n  ")])],1)},O=[],k={name:"MainSnackbar",components:{},props:{},data:function(){return{}},computed:Object(r["a"])({},Object(o["e"])("snackbar",["timeout","message","color","isSnackbarVisible"])),watch:{},created:function(){},methods:Object(r["a"])({},Object(o["d"])("snackbar",["show","dismiss"]))},M=k,I=Object(m["a"])(M,C,O,!1,null,null,null);I.options.__file="MainSnackbar.vue";var w=I.exports,j=a("d1b7"),x=a("8e5b"),U=(a("2ef0"),{name:"Main",components:{MainMenu:y,MainToolbar:h,MainSnackbar:w,IdeaCreateDialog:j["a"],ResultMain:x["default"]},props:{slug:{type:String,required:!1,default:null}},data:function(){return{foo:!1,backgroundTileNum:7}},computed:Object(r["a"])({},Object(o["e"])("search",{searchText:"value"}),Object(o["e"])("route",{routeParams:"params"}),Object(o["e"])("auth",["actionTypes","payload"]),Object(o["c"])("auth",["loggedInUser"]),Object(o["e"])("ui",["isLoading","sortIdeasBy"]),Object(o["e"])("companies",{isCompanyFindPending:"isFindPending"}),Object(o["c"])("companies",{getCompany:"get",getCompanies:"find",companies:"list",company:"current",getCompanyIdBySlug:"getIdBySlug"}),Object(o["c"])("boards",{getBoardIdBySlug:"getIdBySlug",getBoards:"find",currentBoard:"current",boards:"list"}),Object(o["c"])("ideas",{idea:"current"}),{backgroundTile:function(){return"/images/geometric-bg--faded.jpg"},isMainMenuOpen:{get:function(){return this.$store.state.app.isMainMenuOpen},set:function(e){this.$store.commit("ui/setMainMenuOpen",e)}}}),watch:{$route:{immediate:!0,handler:function(){}},sortIdeasBy:{immediate:!1,handler:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}},created:function(){this.setMainMenuOpen(!1)},mounted:function(){this.$dispatchAction({type:this.$actionTypes.GET_INVITED_BOARD,entity:this.company._id,payload:{user:this.loggedInUser}})},destroyed:function(){},methods:Object(r["a"])({},Object(o["d"])("search",{setSearch:"setValue"}),Object(o["d"])("ui",["setLoading","clearLoading","setMainMenuOpen"]),Object(o["d"])("companies",{setCurrentCompany:"setCurrent"}),Object(o["d"])("boards",{clearCurrentBoard:"clearCurrent",setCurrentBoard:"setCurrent"}),Object(o["d"])("ideas",{clearCurrentIdea:"clearCurrent"}),Object(o["d"])("users",{setCurrentUser:"setCurrent",clearCurrentUser:"clearCurrent"}),Object(o["b"])("companies",{loadCompany:"load",changeCompany:"changeCompany"}),Object(o["b"])("boards",{loadBoard:"load",findBoards:"find",setCurrentBoardBySlug:"setCurrentBySlug"}),Object(o["b"])("ideas",{findIdeasBySort:"findBySort",getIdeas:"find",getIdea:"get",loadIdea:"loadIdea"}),Object(o["b"])("users",{loadUser:"load",unloadUser:"unload"}),{handleSortIdeasByChange:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.findIdeasBySort();case 3:e.next=7;break;case 5:e.prev=5,e.t0=e["catch"](0);case 7:case"end":return e.stop()}},e,this,[[0,5]])}));return function(){return e.apply(this,arguments)}}()})}),S=U,B=(a("4868"),Object(m["a"])(S,i,n,!1,null,null,null));B.options.__file="Main.vue";t["default"]=B.exports},7879:function(e,t,a){"use strict";var i=a("86a5"),n=a.n(i);n.a},"7f6c":function(e,t,a){},"86a5":function(e,t,a){},aa51:function(e,t,a){"use strict";var i=a("2cce"),n=a.n(i);n.a},b707:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{value:e.isOpen,width:"375",lazy:"",scrollable:""},on:{input:e.setOpen}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("\n      Invite Collaborators\n    ")]),a("v-card-text",[a("p",{staticClass:"caption"},[e._v("Invite Existing or New Members via Email ")]),e.showShareLink?a("v-text-field",{ref:"shareLink",attrs:{readonly:"","append-icon":"file_copy",outline:"",rules:[e.$rules.required(),e.$rules.maxLength(220)],color:"accent",label:"Share Link",required:""},on:{"click:append":e.copyShareLink},model:{value:e.linkUrl,callback:function(t){e.linkUrl=t},expression:"linkUrl"}}):e._e(),a("v-combobox",{attrs:{outline:"","hide-selected:":"",true:"",label:"Collaborators",multiple:"",color:"primary",chips:""},scopedSlots:e._u([{key:"selection",fn:function(t){return[a("v-chip",{key:JSON.stringify(t.item),staticClass:"v-chip--select-multi",attrs:{selected:t.selected,disabled:t.disabled,close:""},on:{input:function(e){t.parent.selectItem(t.item)}}},[a("v-avatar",{staticClass:"accent white--text",domProps:{textContent:e._s(t.item.slice(0,2).toUpperCase())}}),e._v("\n            "+e._s(t.item)+"\n          ")],1)]}}]),model:{value:e.select,callback:function(t){e.select=t},expression:"select"}})],1),a("v-card-actions",{staticClass:"justify-end"},[a("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(t){t.stopPropagation(),e.setOpen(!1)}}},[e._v("Cancel\n      ")]),a("v-btn",{attrs:{loading:e.isActionPending,color:"accent",flat:""},on:{click:e.submit}},[e._v("Send Invites\n      ")])],1)],1)],1)},n=[],s=(a("96cf"),a("3040")),r=(a("7f7f"),a("28a5"),a("c93e")),o=(a("cadf"),a("551c"),a("097d"),a("2f62")),c=(a("2ef0"),a("2f10")),l={name:"BoardInviteMembersDialog",components:{},props:{showShareLink:{type:Boolean,default:!0}},data:function(){return{select:[],linkUrl:""}},computed:Object(r["a"])({},Object(o["e"])("auth",["actionTypes","roleTypes"]),Object(o["e"])("actions",["isActionPending"]),Object(o["e"])("ui",{isOpen:"isInviteToBoardDialogOpen"}),Object(o["c"])("auth",["roles","loggedInUser"]),Object(o["c"])("companies",{company:"current"}),Object(o["c"])("boards",{currentBoard:"current",boards:"list",shareLink:"shareLink"}),Object(o["c"])("ideas",{idea:"current"}),{invitations:function(){var e=this;return this.select.filter(function(e){return e}).map(function(t){return{email:t,role:"member",company:e.company._id,board:e.currentBoard._id,invitedBy:e.loggedInUser._id}})}}),watch:{isOpen:function(e){if(e){console.log("ruby: BoardInviteMemebersDialog opened , ",this.$route.path),console.log("ruby: this.idea",this.idea);var t=null;t=this.currentBoard?this.currentBoard._id:this.idea.board,this.linkUrl=c["a"].BaseUrl+"invitation/"+this.company._id+"_FAI35_"+this.loggedInUser._id+"_FAI35_"+t+"_FAI35_"+this.company.name.split(" ").join("_")}}},mounted:function(){console.log("ruby: test,mounted board",this.currentBoard),console.log("ruby: test, idea",this.idea);var e=null;e=this.currentBoard?this.currentBoard._id:this.idea.board,this.linkUrl=c["a"].BaseUrl+"invitation/"+this.company._id+"_FAI35_"+this.loggedInUser._id+"_FAI35_"+e+"_FAI35_"+this.company.name.split(" ").join("_")},methods:Object(r["a"])({},Object(o["d"])("ui",{setOpen:"setInviteToBoardDialogOpen"}),Object(o["b"])("invitations",{createInvitations:"create"}),Object(o["b"])("companyManagement",["inviteMembers"]),{submit:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$dispatchAction({type:this.$actionTypes.INVITE_COMPANY_MEMBERS,entity:this.company._id,payload:this.invitations});case 2:return e.next=4,this.$dispatchAction({type:this.$actionTypes.INVITE_BOARD_MEMBERS,entity:this.company._id,payload:this.invitations});case 4:this.setOpen(!1);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),validateEmail:function(e){var t=/\S+@\S+\.\S+/;return t.test(e)},copyShareLink:function(){console.log("ruby: copyShareLink clicked",this.$refs.shareLink);var e=this.linkUrl,t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.focus(),t.select();try{var a=document.execCommand("copy"),i=a?"successful":"unsuccessful";console.log("Fallback: Copying text command was "+i)}catch(e){console.error("Fallback: Oops, unable to copy",e)}document.body.removeChild(t)}})},d=l,u=(a("aa51"),a("2877")),m=Object(u["a"])(d,i,n,!1,null,"2dab5698",null);m.options.__file="BoardInviteMembersDialog.vue";t["a"]=m.exports},c8c3:function(e,t,a){"use strict";var i=a("51be"),n=a.n(i);n.a},d1b7:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{value:e.isOpen,"max-width":"525",lazy:""},on:{input:e.setOpen}},[a("v-form",{ref:"form",staticClass:"accent",on:{submit:function(t){return t.preventDefault(),e.submit(t)}}},[a("v-card",[a("v-alert",{staticClass:"mb-2",attrs:{value:!e.checkUpdate()&&!this.blnEditing,type:"error"}},[e._v("\n        Idea limit reached. New ideas are only visible to you.\n        "),a("v-btn",{attrs:{color:"primary",flat:""},on:{click:e.gotoUpgrade}},[a("h4",[e._v("UPGRADE")])])],1),a("v-card-title",{attrs:{"primary-title":""}},[a("h3",{staticClass:"title"},[e._v(e._s(e.blnEditing?"Edit":"New")+" Idea")])]),a("v-card-text",[e.currentBoard?e._e():a("v-select",{attrs:{items:e.boardsOptions,rules:[e.$rules.required()],autofocus:!e.currentBoard,color:"accent",label:"Board",required:""},model:{value:e.ideaModel.board,callback:function(t){e.$set(e.ideaModel,"board",t)},expression:"ideaModel.board"}}),a("v-text-field",{attrs:{rules:[e.$rules.required(),e.$rules.maxLength(120)],autofocus:!!e.currentBoard,counter:"120",color:"accent",label:"Title",required:""},model:{value:e.ideaModel.title,callback:function(t){e.$set(e.ideaModel,"title",t)},expression:"ideaModel.title"}}),a("v-textarea",{attrs:{rules:[e.$rules.maxLength(500)],"auto-grow":"",rows:"1",counter:"500",color:"accent",label:"Description"},model:{value:e.ideaModel.description,callback:function(t){e.$set(e.ideaModel,"description",t)},expression:"ideaModel.description"}}),a("i-image-picker",{staticClass:"mt-4",attrs:{loading:e.isImagePickerLoading},on:{"update:loading":function(t){e.isImagePickerLoading=t}},model:{value:e.ideaModel.images,callback:function(t){e.$set(e.ideaModel,"images",t)},expression:"ideaModel.images"}})],1),a("v-card-actions",{staticClass:"justify-end"},[a("v-btn",{attrs:{color:"primary",flat:""},on:{click:e.canceled}},[e._v("Cancel\n        ")]),a("v-btn",{attrs:{loading:e.isActionPending||e.isImagePickerLoading,type:"submit",color:"accent",flat:""}},[e._v(e._s(e.blnEditing?"Save":"Create")+"\n        ")]),a("p",[e._v(e._s(e.loggedInUser.ideasCount))])],1)],1)],1)],1)},n=[],s=(a("ac6a"),a("96cf"),a("3040")),r=(a("7f7f"),a("c93e")),o=(a("cadf"),a("551c"),a("097d"),a("2ef0")),c=a("2f62"),l=a("5fb0"),d=a("b707"),u={name:"IdeaCreateDialog",components:{BoardInviteMembersDialog:d["a"]},props:{value:{type:Object,default:function(){return{}}}},data:function(){return{board:null,title:null,userStory:null,description:null,ideaModel:{},images:[],isImagePickerLoading:!1,userStoryHint:"As a <em><strong>user type</strong></em>, I need to <em><strong>do something</strong></em> so that I can <em><strong>realize a reward</strong></em>."}},computed:Object(r["a"])({},Object(c["e"])("ui",{isOpen:"isCreateIdeaDialogOpen"}),Object(c["e"])("actions",["isActionPending"]),Object(c["c"])("auth",["loggedInUser"]),Object(c["c"])("companies",{company:"current"}),Object(c["c"])("boards",{currentBoard:"current",boards:"list",getUsers:"getUsers"}),Object(c["c"])("ideas",{trialIdeasCount:"trialIdeasCount"}),Object(c["e"])("ideas",{ideasPagination:"pagination"}),{myIdeasCount:function(){return Object(o["get"])(this.ideasPagination,"default.total",0)},blnEditing:function(){return!(!this.value||!this.value._id)},boardsOptions:function(){return this.boards.map(function(e){return{value:e._id,text:e.name}})},idea:function(){return{company:this.company._id,board:this.board||this.currentBoard,title:this.title,userStory:this.userStory,description:this.description,createdBy:this.loggedInUser._id}}}),watch:{isOpen:function(e){e||(this.$refs.form.reset(),this.images=[])},value:function(e,t){console.log("ruby: watch test",e," => ",t),e&&this.initForm()}},created:function(){console.log("ruby: here is created in Idea Create Dialog"),this.initForm()},methods:Object(r["a"])({},Object(c["d"])("ui",{setOpen:"setCreateIdeaDialogOpen"}),Object(c["d"])("snackbar",{showSnackbar:"show"}),Object(c["d"])("ui",{setInviteToBoardDialogOpen:"setInviteToBoardDialogOpen"}),Object(c["b"])("ideas",{patchIdea:"patch"}),{gotoUpgrade:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),checkUpdate:function(){return!!this.loggedInUser.stripe&&("Free"==this.loggedInUser.stripe.plan?!(this.loggedInUser.ideasCount>=this.trialIdeasCount):"Premium"==this.loggedInUser.stripe.plan)}},Object(c["b"])("uploads",{upload:"create"}),Object(c["b"])("ideas",{createIdea:"create",patchIdea:"patch"}),Object(c["b"])("votes",{vote:"create"}),{initForm:function(){var e=this,t=this.$FeathersVuex.Idea;if(this.value instanceof t)this.ideaModel=new t(this.value).clone(),console.log("ruby: here is Idea model clone check--if",this.ideaModel);else{var a=-2;this.loggedInUser.ideasCount<this.trialIdeasCount?a=1:this.loggedInUser.stripe&&"Free"!=this.loggedInUser.stripe.plan&&(a=2),this.ideaModel=new t({board:e.currentBoard?e.currentBoard._id:void 0,company:this.company._id,createdBy:this.loggedInUser._id,check:a})}},canceled:function(){this.setOpen(!1)},uploadImage:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t,a){var i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$dispatchAction({type:this.$actionTypes.UPLOAD_IMAGES,payload:{uri:a,bucket:"".concat(this.company._id,"/ideas/").concat(t),thumb:!0},entity:this.company._id});case 2:return i=e.sent,e.abrupt("return",i.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),submit:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,a,i,n,r,c,d=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(console.log("ruby: idea create start! test for heroku"),t=this.$refs.form,!t.validate()){e.next=33;break}if(i=this.checkUpdate(),!this.blnEditing){e.next=10;break}return e.next=7,this.ideaModel.save();case 7:a=this.ideaModel._id,e.next=16;break;case 10:return e.next=12,this.createIdea(this.ideaModel);case 12:return n=e.sent,a=Object(o["get"])(n,"data._id"),e.next=16,this.vote({parent:a,kind:l["voteKinds"].ideas,owner:this.loggedInUser._id,voter:this.loggedInUser._id});case 16:if(!this.ideaModel.images.length){e.next=25;break}return console.log("ruby: images exist"),r=[],e.next=21,Promise.all(this.ideaModel.images.map(function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){var i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!t.data){e.next=7;break}return e.next=3,d.uploadImage(a,t.data);case 3:i=e.sent,r.push(i),e.next=8;break;case 7:r.push(t);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()));case 21:return this.ideaModel.images=r,console.log("ruby: ideaModel after",this.ideaModel),e.next=25,this.patchIdea([a,{images:this.ideaModel.images}]);case 25:return console.log("ruby: count of users",this.getUsers(this.currentBoard._id).length),this.blnEditing||1!=this.getUsers(this.currentBoard._id).length||this.setInviteToBoardDialogOpen(!0),e.next=29,this.setOpen(!1);case 29:c=this.loggedInUser,c.ideasCount=this.loggedInUser.ideasCount+1,i||this.blnEditing||this.showSnackbar({color:"error",message:"Warning! This will hide all ideas over the plan limit."}),this.$router.push({name:"idea",params:{idea:a}});case 33:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()})},m=u,p=a("2877"),h=Object(p["a"])(m,i,n,!1,null,null,null);h.options.__file="IdeaCreateDialog.vue";t["a"]=h.exports},db46:function(e,t,a){"use strict";var i=a("7f6c"),n=a.n(i);n.a},ddf9:function(e,t,a){"use strict";var i=a("1604"),n=a.n(i);n.a},ecd6:function(e,t,a){}}]);
//# sourceMappingURL=chunk-531a78e1.b53e5c48.js.map